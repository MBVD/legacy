
# 1. Введение

Открытие файла, чтение из файла, запись в файл. 

```c
open, read, write, iseek, close
```

Функции, описываемые в этой главе, часто называют функциями небуферизованного ввода/вывода

>[!tip] 
>Термин _небуферизированный_ означает, что каждая функция операции чтения или записи обращается к системному вызову в ядре

# 2. Дескрипторы Файлов

Все открытые файлы представлены в ядре файловыми дескрипторами. Файловый дескриптор - это неотрицательное число. 
Когда процесс открывает существующий файл или создаёт новый, ядро возвращает ему файловый дескриптор. 

Чтобы выполнить запись в файл или чтение из него, нужно передать функции read или write его файловый дескриптор, полученный вызовом функции open или creat

0 - устройство стандартного ввода процесса
1 - устройство вывода
2 - устройства вывода ошибок

Вместо цифр, используем STDIN_FILENO, STDOUT_FILENO и STDERR_FILENO

>[!tip] Библиотека
>Эти константы в библиотеке <unistd.h>

Под файловые дескрипторы отводится диапазон чисел от 0 до OPEN_MAX-1

# 3. Функции open и openat

Файл создаётся или открывается функцией open или openat:

```c
int open(const char *path, int oflag, .../* mode_t mode */);

int openat(int fd, const char *path, int oflag, ...);

Обе возвращают дескриптор файла в случае успеха
-1 в случае ошибки
```

path - имя файла, который будет открыт или создан

oflag определяет количество параметров функции и он формируется объединением одной или более констант для взаимодействия с файлом:

>[!Note] Основные константы
>O_RDONLY - только чтение
>O_WRONLY - только запись
>O_RDWR - для чтения и записи
>O_EXEC - только для выполнения
>O_SEARCH - только для поиска ( применяется к каталогам)

Функции open и openat гарантируют, что возвращаемый дескриптор возьмет наименьшее неиспользуемое положительное число.

Параметр fd:

1)  Если path - строка абсолютного пути, то fd игнорируется и openat действует подобно open
2)  path - строка относительного пути, а fd содержит дескриптор файла местоположения стартовой точки для относительного пути
3)  path - строка относительного пути, а параметр fd = AT_FDCWD. В таком случае путь откладывается от текущего рабочего каталога и openat работает как open

#### Усечение имени файла и строки пути

Большинство современных систем поддерживают имена файлов длиной до 255 символов. Поскольку имена файлов обычно короче этого предела, данное ограничение не является большой проблемой для большинства приложений.

# 4. Функция creat

```c
#include <fcntl.h>

int creat(const char *path, mode_t mode);

```

Эта функция эквивалентна:

```c
open(path, )
```

